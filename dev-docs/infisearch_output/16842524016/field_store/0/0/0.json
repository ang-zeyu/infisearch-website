[[["_relative_fp","numeric_sorts.html"],["title","Sorting by Numbers & Dates - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Sorting by Numbers & Dates"],["body","\n"],["body","Results can also be sorted by numeric fields. Let’s suppose we want to support filtering weather forecast articles by their date posted. The date is stored in an element with the data-date-posted attribute."],["body","\n"],["body","\n"],["body","First, define the numeric field that can store any signed 64-bit integers."],["body","\n"],["body","\"fields_config\": {\n  \"fields\": {\n    \"datePostedField\": {\n      \"storage\": [{\n        \"type\": \"i64\",\n\n        // Default UNIX timestamp.\n        // In this case, we use \"0\", which falls on Jan 1 1970 00:00 UTC.\n        \"default\": 0,\n\n        // Parse the data seen as a date.\n        // Integers, floats, and other datetime formats are also supported,\n        // see the above linked documentation.\n        \"parse\": {\n          \"method\": \"datetime\",\n          \"datetime_fmt\": \"%Y %b %d %H:%M %z\"\n        }\n      }]\n    }\n  }\n}\n"],["body","\n"],["body","Next, map the data from the data-date-posted attribute into the above field."],["body","\n"],["body","\"indexing_config\": {\n  \"loaders\": {\n    \"HtmlLoader\": {\n      \"selectors\": {\n        // Match elements with the attribute\n        \"[data-date-posted]\": {\n          // And index the attribute into our earlier defined field\n          \"attr-map\": {\n            \"[data-date-posted]\": \"datePostedField\"\n          }\n        }\n      }\n    }\n  }\n}\n"],["body","\n"],["body","Lastly, configure InfiSearch’s UI to setup the UI dropdown using this field."],["body","\n"],["body","infisearch.init({\n  ...\n  uiOptions: {\n    sortFields: {\n      dateposted: {\n        asc: 'Date: Oldest First',\n        desc: 'Date: Latest First',\n      },\n    },\n  }\n})\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","filters.html"],["title","Creating Filters - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Filters"],["body","\n"],["headingLink","multi-select-filters"],["heading","Multi-Select Filters"],["body","\n"],["body","Multi-select filters, for example the ones you see in this documentation’s search (“User Guide”, “Advanced”), allow users to filter for results belonging to one or more categories."],["body","\n"],["body","For this guide, let’s suppose we have a bunch of weather forecast articles and want to support filtering them by the weather (sunny, warm, cloudy)."],["body","\n"],["body","First, setup a custom field inside the indexer configuration file."],["body","\n"],["body","\"fields_config\": {\n  \"fields\": {\n    \"weatherField\": {\n      \"storage\": [{ \"type\": \"enum\" }]\n    }\n  }\n}\n"],["body","\n"],["body","The \"storage\": [{ \"type\": \"enum\" }] option tells InfiSearch that to store the first seen value of this field for each document, but we’ll need to tell InfiSearch where the data for this field comes from next."],["body","\n"],["body","Let’s assume we’re dealing with a bunch of HTML weather forecast articles, which uses the HTMLLoader. In particular, these HTML files store the weather inside a specific element with an id=\"weather\"."],["body","\n"],["body","\"indexing_config\": {\n  \"loaders\": {\n    \"HtmlLoader\": {\n      \"selectors\": {\n        // Match elements with an id of weather\n        \"#weather\": {\n          // And index its contents into our earlier defined field\n          // You can also use attributes, see the HTMLLoader documentation\n          \"field_name\": \"weatherField\"\n        }\n      }\n    }\n  }\n}\n"],["body","\n"],["body","Lastly, we need to tell InfiSearch’s UI to setup a multi-select filter using this field. To do so, add the following to your init call."],["body","\n"],["body","infisearch.init({\n  ...\n  uiOptions: {\n    multiSelectFilters: [\n      {\n        fieldName: 'weatherField', // matching our earlier defined field\n        displayName: 'Weather',\n        defaultOptName: 'Probably Sunny!',\n        collapsed: true,  // only the first header is initially expanded\n      },\n      // You can setup more filters as needed following the above procedures\n    ]\n  }\n})\n"],["body","\n"],["body","The displayName option tells the UI how to display the multi-select’s header. We simply use an uppercased “Weather” in this case."],["body","\n"],["body","Some of the weather forecast articles indexed may also be missing the id=\"weather\" element, for example due to a bug in generating the article, and therefore lacks an enum value. InfiSearch internally assigns such documents a default enum value by default. The defaultOptName option specifies the name of this default enum value as seen in the UI."],["body","\n"],["headingLink","numeric-filters"],["heading","Numeric Filters"],["body","\n"],["body","You can also create minimum-maximum numeric filters with InfiSearch. These can be of either <input type=\"number|date|datetime-local\" />."],["body","\n"],["body","\n"],["body","Continuing the same example as multi-select filters, let’s suppose we also want to support filtering weather forecast articles by their number of page views. These page views are stored in the data-pageviews attribute of the element with an id=\"weather\"."],["body","\n"],["body","First, we define a signed integer field."],["body","\n"],["body","\"fields_config\": {\n  \"fields\": {\n    \"pageViewsField\": {\n      \"storage\": [{\n        \"type\": \"i64\",\n        // Default number of page views if there is none\n        \"default\": 0,\n        // Parse the data seen as a signed integer\n        // Datetimes and floats are also supported, see the above linked documentation\n        \"parse\": { \"method\": \"normal\" } \n      }]\n    }\n  }\n}\n"],["body","\n"],["body","Next, we map the data from the data-pageviews attribute into the above field."],["body","\n"],["body","\"indexing_config\": {\n  \"loaders\": {\n    \"HtmlLoader\": {\n      \"selectors\": {\n        // Match elements with an id of weather\n        \"#weather\": {\n          // And index its data-pageviews attribute into our earlier defined field\n          \"attr-map\": {\n            \"[data-pageviews]\": \"pageViewsField\"\n          }\n        }\n      }\n    }\n  }\n}\n"],["body","\n"],["body","Lastly, we tell InfiSearch’s UI to setup a numeric filter using this field. To do so, add the following to your infisearch.init call."],["body","\n"],["body","infisearch.init({\n  ...\n  uiOptions: {\n    numericFilters: [\n      {\n        fieldName: 'pageViewsField',\n        displayName: 'Number of Views',\n        type: 'number', // date, datetime-local is also supported\n        minLabel: 'Min',\n        maxLabel: 'Max',\n      }\n    ]\n  }\n})\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","getting_started.html"],["title","Getting Started - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Getting Started"],["body","\n\n"],["body","This page assumes the use case of a static site, that is:"],["body","\n\n"],["body","\n"],["body","You have some HTML files you want to index."],["body","\n"],["body","\n"],["body","\n"],["body","These HTML files are served in a static file server, and are linkable to."],["body","\n"],["body","\n"],["body","\n"],["body","You have an <input> element for attaching a search dropdown."],["body","\n\n"],["body","For mobile devices"],["body","\n"],["body","A fullscreen modal will show when the input element is focused.\n"],["body","This documentation uses an alternative user interface (try the search function!), which is covered later.\nTo preview the defaults, head on over here."],["body","\n\n"],["body","\n\n"],["headingLink","installing-the-indexer"],["heading","Installing the indexer"],["body","\n"],["body","There are a couple of options for installing the indexer:"],["body","\n\n"],["body","Install the global npm package with npm install -g @infisearch/cli."],["body","\n"],["body","If you have the rust / cargo toolchains setup, run cargo install infisearch --vers 0.10.1."],["body","\n"],["body","You can also grab the cli binaries here."],["body","\n\n"],["headingLink","running-the-indexer"],["heading","Running the indexer"],["body","\n"],["body","Run the executable as such, replacing <source-folder-path> with the relative or absolute folder path of your source html files, and <output-folder-path> with your desired index output folder."],["body","\n"],["body","infisearch <source-folder-path> <output-folder-path>\n"],["body","\n"],["body","If you are using the binaries, replace infisearch with the appropriate executable name."],["body","\n"],["headingLink","other-cli-options"],["heading","Other Cli Options"],["body","\n\n"],["body","-c <config-file-path>: You may also change the config file location (relative to the source-folder-path) using the -c <config-file-path> option."],["body","\n"],["body","--preserve-output-folder: All existing contents in the output folder are removed before starting. Specify this option to avoid this."],["body","\n\n"],["headingLink","installing-the-search-ui"],["heading","Installing the search UI"],["body","\n"],["headingLink","installation-via-cdn"],["heading","Installation via CDN"],["body","\n"],["body","<!-- Replace \"v0.10.1\" as appropriate -->\n\n<!--  Search UI script -->\n<script src=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui.ascii.bundle.js\"></script>\n<!-- Search UI css, this provides some basic styling for the search dropdown, and can be omitted if desired -->\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui-light.css\" />\n"],["body","\n"],["body","\n"],["body","⚠️ Ensure the linked versions match the indexer version used exactly."],["body","\n"],["body","\n"],["headingLink","hosting-the-files"],["heading","Hosting the Files"],["body","\n"],["body","If you wish to host the files, you can find them in the <output-folder-path>/assets directory generated by the indexer. Using these guarantees that you will always being using the same indexer and search UI versions."],["body","\n"],["body","The folder contains:"],["body","\n\n"],["body","A pair of language-specific files that should be served from the same folder:\n\n"],["body","search-ui.*.bundle.js, the default is search-ui.ascii.bundle.js"],["body","\n"],["body","An accompanying WebAssembly binary"],["body","\n\n"],["body","\n"],["body","A stylesheet: search-ui-basic/light/dark.css"],["body","\n\n"],["body","The same files are also in the release packages here, inside search.infi.zip."],["body","\n"],["headingLink","ui-initialisation"],["heading","UI Initialisation"],["body","\n"],["body","Once you have loaded the bundles, simply call the infisearch.init function in your page."],["body","\n"],["body","This requires an input element with an id=infi-search to be present in the page by default. The id can be configured via uiOptions.input."],["body","\n"],["body","infisearch.init({\n  searcherOptions: {\n    // Output folder url specified as the second parameter in the cli command\n    // Urls like '/output/' will work as well\n    url: 'http://<your-domain>/output/',\n  },\n  uiOptions: {\n    // Input / source folder url, specified as the first parameter in the cli command\n    sourceFilesUrl: 'http://<your-domain>/source/',\n    input: 'infi-search',\n  }\n});\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","search_syntax.html"],["title","Query Syntax - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Search Syntax"],["body","\n"],["body","InfiSearch provides a few advanced search operators that can be used in the search API. These are also made known to the user using the help icon on the bottom right of the search UI."],["body","\n"],["headingLink","boolean-operators-parentheses"],["heading","Boolean Operators, Parentheses"],["body","\n"],["body","AND and NOT and inversion operators are supported.\nOR is the default behaviour; Documents are ranked according to the BM25 model.\nParentheses (...) can be used to group expressions together."],["body","\n"],["body","weather +sunny  - documents that may contain \"weather\" but must contain \"sunny\"\nweather -sunny  - documents containing \"weather\" and do not have \"sunny\"\n~cloudy         - all documents that do not contain \"gloomy\"\n~(ipsum dolor)  - all documents that do not contain \"ipsum\" and \"dolor\"\n"],["body","\n"],["headingLink","phrase-queries"],["heading","Phrase Queries"],["body","\n"],["body","Phrase queries are also supported by enclosing the relevant terms in \"...\"."],["body","\n"],["body","\"sunny weather\" - documents containing \"sunny weather\"\n"],["body","\n"],["body","The withPositions index feature needs to be enabled for this to work (by default it is)."],["body","\n"],["headingLink","field-search"],["heading","Field Search"],["body","\n"],["body","Field queries are supported via the following syntax field_name::"],["body","\n"],["body","title:sunny              - documents containing \"sunny\" in the title\nheading:(+sunny +cloudy) - documents with both \"lorem\" and \"ipsum\" in headings only\nbody:gloomy              - documents with \"gloomy\" elsewhere\n"],["body","\n"],["headingLink","wildcard-search"],["heading","Wildcard Search"],["body","\n"],["body","You can also perform suffix searches on any term using the * character:"],["body","\n"],["body","run* - searches for \"run\", \"running\"\n"],["body","\n"],["body","In most instances, an automatic wildcard suffix search is also performed on the last query term that the user is still typing."],["body","\n"],["headingLink","escaping-search-operators"],["heading","Escaping Search Operators"],["body","\n"],["body","All search operators can also be escaped using \\:"],["body","\n"],["body","\\+sunny\n\\-sunny\n\\(sunny cloudy\\)\n\\\"cloudy weather\\\"\n\"phrase query with qu\\\"otes\"\ntitle\\:lorem\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","csp.html"],["title","CSP - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Content Security Policy"],["body","\n"],["headingLink","webassembly-csp"],["heading","WebAssembly CSP"],["body","\n"],["body","InfiSearch runs using WebAssembly. If you are using a restrictive content security policy,  WebAssembly as a whole unfortunately currently requires adding the script-src: 'unsafe-eval'; directive."],["body","\n"],["body","This error will show up in chrome for example as the following extremely detailed error message:"],["body","\n"],["body","\n"],["body","Uncaught (in promise) CompileError: WebAssembly.instantiateStreaming():\nRefused to compile or instantiate WebAssembly module because ‘unsafe-eval’\nis not an allowed source of script in the following Content Security Policy directive: ‘…’"],["body","\n"],["body","\n"],["body","Support for a more specific script-src: 'wasm-unsafe-eval'; directive has landed in Chrome, Edge and Firefox, but is still pending in Safari."],["body","\n"],["headingLink","webworker-csp"],["heading","WebWorker CSP"],["body","\n"],["body","InfiSearch also utilises a blob URL to load its WebWorker. This shouldn’t pose as much of a security concern since blob URLs can only be created by scripts already executing within the browser."],["body","\n"],["body","To whitelist this, add the script-src: blob:; directive."],["body","\n"],["headingLink","cdn-csp"],["heading","CDN CSP"],["body","\n"],["body","Naturally, if you load InfiSearch assets from the CDN, you will also need to whitelist this in the script-src: cdn.jsdelivr.net; and style-src: cdn.jsdelivr.net; directives."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","search_configuration_renderers.html"],["title","Altering HTML outputs - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Altering HTML Outputs"],["body","\n\n"],["body","This page covers customising the result preview HTML output structure."],["body","\n"],["body","Some use cases for this include:"],["body","\n\n"],["body","The default HTML structure is not sufficient for your styling needs"],["body","\n"],["body","You want to override or insert additional content sourced from your own fields (e.g. an image)"],["body","\n"],["body","You want to change the default use case of linking to a web page entirely (e.g. use client side routing)"],["body","\n\n"],["body","\n"],["body","💡 If you only need to style the dropdown or search popup, you can include your own css file to do so and / or override the variables exposed by the default css bundle."],["body","\n"],["body","\n"],["body","The only API option is similarly specified under the uiOptions key of the root configuration object."],["body","\n"],["body","infisearch.init({\n    uiOptions: {\n        listItemRender: ...\n    }\n});\n"],["body","\n"],["body","It’s interface is as follows:"],["body","\n"],["body","type ListItemRender = async (\n  h: CreateElement,\n  opts: Options,  // what you passed to infisearch.init\n  result: Result,\n  query: Query,\n) => Promise<HTMLElement>;\n"],["body","\n"],["body","If you haven’t, you should also read through the Search API documentation on the Result and Query parameters."],["body","\n"],["body","h function"],["body","\n"],["body","This is an optional helper function you may use to create elements."],["body","\n"],["body","The method signature is as such:"],["body","\n"],["body","export type CreateElement = (\n  // Element name\n  name: string,\n\n  // Element attribute map\n  attrs: { [attrName: string]: string },\n\n  /*\n   Child elements (HTMLElement) OR text nodes (string)\n   String parameters are automatically escaped.\n  */\n  ...children: (string | HTMLElement)[]\n) => HTMLElement;\n"],["body","\n"],["body","Accessibility and User Interaction"],["body","\n"],["body","To ensure that combobox controls work as expected, you should also ensure that the appropriate elements are labelled with role='option' (and optionally role='group')."],["body","\n"],["body","Elements with role='option' will also have the .focus class applied to them once they are visually focused. You can use this class to style the option."],["body","\n"],["body","Granularity"],["body","\n"],["body","At the current, this API is moderately lengthy, performing things such as limiting the number of sub matches (heading-content pairs) per document, formatting the relative file path of documents into a breadcrumb form, etc."],["body","\n"],["body","There may be room for breaking this API down further as such, please help to bring up a feature request if you have any suggestions!."],["body","\n"],["body","Source Code"],["body","\n"],["body","See the source to get a better idea of using this API."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","language.html"],["title","Language - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Language Configuration"],["body","\n"],["body","There are 3 language modules available. To configure these, you will need to serve the appropriate language bundle in your HTML (or edit the CDN link accordingly), and edit the indexer configuration file."],["body","\n"],["body","{\n  \"lang_config\": {\n    // ... options go here ...\n  }\n}\n"],["body","\n"],["headingLink","ascii-tokenizer"],["heading","Ascii Tokenizer"],["body","\n"],["body","The default tokenizer should work for any language that relies on ASCII characters, or their inflections (e.g. “á”)."],["body","\n"],["body","The text is first split into on sentences, then whitespaces to obtain tokens. An asciiFoldingFilter is then applied to normalize diacritics, followed by punctuation and non-word-character boundary removal."],["body","\n"],["body","{\n  \"lang\": \"ascii\",\n  \"options\": {\n    \"stop_words\": [\n      \"a\", \"an\", \"and\", \"are\", \"as\", \"at\", \"be\", \"but\", \"by\", \"for\",\n      \"if\", \"in\", \"into\", \"is\", \"it\", \"no\", \"not\", \"of\", \"on\", \"or\",\n      \"such\", \"that\", \"the\", \"their\", \"then\", \"there\", \"these\",\n      \"they\", \"this\", \"to\", \"was\", \"will\", \"with\"\n    ],\n    \"ignore_stop_words\": false,\n\n    // Hard limit = 250\n    \"max_term_len\": 80\n  }\n}\n"],["body","\n"],["body","CDN Link"],["body","\n"],["body","<script src=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui.ascii.bundle.js\"></script>\n"],["body","\n"],["headingLink","ascii-tokenizer-with-stemmer"],["heading","Ascii Tokenizer with Stemmer"],["body","\n"],["body","This is essentially the same as the ascii tokenizer, but adds a stemmer option."],["body","\n"],["body","{\n  \"lang\": \"ascii_stemmer\",\n  \"options\": {\n    // ----------------------------------\n    // Ascii Tokenizer options also apply\n    // ...\n    // ----------------------------------\n\n    // Any of the languages here\n    // https://docs.rs/rust-stemmers/1.2.0/rust_stemmers/enum.Algorithm.html\n    // Languages other than \"english\" have not been extensively tested. Use with caution!\n    \"stemmer\": \"english\"\n  }\n}\n"],["body","\n"],["body","If you do not need stemming, use the ascii tokenizer, which has a smaller wasm binary."],["body","\n"],["body","CDN Link"],["body","\n"],["body","<script src=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui.ascii-stemmer.bundle.js\"></script>\n"],["body","\n"],["headingLink","chinese-tokenizer"],["heading","Chinese Tokenizer"],["body","\n"],["body","This is a lightweight character-wise tokenizer, not based on word-based tokenizers like Jieba."],["body","\n"],["body","You are highly recommended to keep positions indexed and query term proximity ranking turned on when using this tokenizer, in order to boost the relevance of documents with multi-character queries."],["body","\n"],["body","{\n  \"lang\": \"chinese\",\n  \"options\": {\n    \"stop_words\": [],\n    \"ignore_stop_words\": false,\n    \"max_term_len\": 80\n  }\n}\n"],["body","\n"],["body","CDN Link"],["body","\n"],["body","<script src=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui.chinese.bundle.js\"></script>\n"],["body","\n"],["headingLink","stop-words"],["heading","Stop Words"],["body","\n"],["body","All tokenizers support keeping (default) or removing stop words using the ignore_stop_words option."],["body","\n"],["body","Keeping them enables the following:"],["body","\n\n"],["body","Processing phrase queries such as \"for tomorrow\" accurately; Stop words would be removed automatically from such queries."],["body","\n"],["body","Boolean queries of stop words (e.g. if AND forecast AND sunny)"],["body","\n"],["body","More accurate ranking for free text queries, which uses stop words in term proximity ranking"],["body","\n\n"],["headingLink","ui-translations"],["heading","UI Translations"],["body","\n"],["body","The UI’s text can also be overwritten.\nRefer to this link for the default set of texts."],["body","\n"],["body","infisearch.init({\n  uiOptions: {\n    translations: { ... }\n  }\n})\n"],["body","\n"],["body","Option"],["body","Default"],["body","Description"],["body","\n"],["body","resultsLabel"],["body","'Site results'"],["body","Accessibility label for the listbox containing result previews. This is announced to screenreaders."],["body","\n"],["body","fsButtonLabel"],["body","'Search'"],["body","Accessibility label for the original input element that functions as a button when the fullscreen UI is in use."],["body","\n"],["body","fsButtonPlaceholder"],["body","undefined"],["body","Placeholder override for the provided input that functions as a button when the fullscreen UI is in use."],["body","\n"],["body","fsPlaceholder"],["body","'Search this site'"],["body","Placeholder of the input element in the fullscreen UI."],["body","\n"],["body","fsCloseText"],["body","'Close'"],["body","Text for the "],["body","Close"],["body"," button."],["body","\n"],["body","filtersButton"],["body","'Filters'"],["body","Text for the "],["body","Filters"],["body"," button if any enum or numeric filters are configured."],["body","\n"],["body","numResultsFound"],["body","' results found'"],["body","The text following the number of results found."],["body","\n"],["body","startSearching"],["body","'Start Searching Above!'"],["body","Text shown when the input is empty."],["body","\n"],["body","startingUp"],["body","'... Starting Up ...'"],["body","Text shown when InfiSearch is still not ready to perform any queries. The setup occurs extremely quickly, you will hopefully not be able to see this text most of the time."],["body","\n"],["body","navigation"],["body","'Navigation'"],["body","Navigation controls text."],["body","\n"],["body","sortBy"],["body","'Sort by'"],["body","Header text for custom sort orders."],["body","\n"],["body","tipHeader"],["body","'🔎 Advanced search tips'"],["body","Header of the tip popup."],["body","\n"],["body","tip"],["body","'Tip'"],["body","First column header of the tip popup."],["body","\n"],["body","example"],["body","'Example'"],["body","Second column header of the tip popup."],["body","\n"],["body","tipRows.xx (refer here)"],["body","Examples for usage of InfiSearch’s advanced search syntax."],["body","\n"],["body","error"],["body","'Oops! Something went wrong... 🙁'"],["body","Generic error text when something goes wrong"],["body","\n\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","linking_to_others.html"],["title","Linking to Other Pages - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Linking to other pages"],["body","\n"],["body","InfiSearch is convenient to get started with if the pages you link to are the same files you index, and these files are hosted at sourceFilesUrl in the same way your source file folders are structured."],["body","\n"],["body","Linking to other pages instead is facilitated by the default link field, which lets you override the link used in the result preview."],["body","\n"],["body","There is also a default data mapping for HTML files which the below section covers. If using JSON or CSV files, refer to the earlier section."],["body","\n"],["headingLink","indexing-html-files"],["heading","Indexing HTML Files"],["body","\n"],["body","For HTML files, simply add this link with the data-infisearch-link attribute."],["body","\n"],["body","<span data-infisearch-link=\"https://www.google.com\"></span>\n"],["body","\n"],["body","This data mapping configuration is already implemented by default, shown by the below snippet."],["body","\n"],["body","\"loaders\": {\n  \"HtmlLoader\": {\n    \"selectors\": {\n      \"span[data-infisearch-link]\": {\n        \"attr_map\": {\n          \"data-infisearch-link\": \"link\"\n        }\n      }\n    }\n  }\n}\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","introduction.html"],["title","Introduction - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Introduction"],["body","\n\n"],["body","InfiSearch is a client-side search solution made for static sites, including a search UI and library depending on a pre-built index generated by a CLI tool."],["body","\n"],["headingLink","features"],["heading","Features"],["body","\n\n"],["body","\n"],["body","Relevant Search 🔍: spelling correction, automatic prefix search, boolean and phrase queries, BM25 scoring, proximity scoring, facet filters and more…"],["body","\n"],["body","\n"],["body","\n"],["body","Speedy 🏇: WebAssembly & WebWorker powered, enabling efficient, non-blocking query processing. Also includes persistent caching to minimize network requests, and a multi-threaded  CLI indexer powered by Rust."],["body","\n"],["body","\n"],["body","\n"],["body","Semi-Scalable, achieved by optionally splitting the index into tiny morsels, complete with incremental indexing."],["body","\n"],["body","\n"],["body","\n"],["body","A customisable, accessible user interface 🖥️"],["body","\n"],["body","\n"],["body","\n"],["body","Support for multiple file formats (.json,csv,pdf,html) to satisfy more custom data requirements."],["body","\n"],["body","\n\n"],["headingLink","search-features"],["heading","Search Features"],["body","\n"],["body","A little more about some of InfiSearch’s search features."],["body","\n"],["headingLink","blazing-fast"],["heading","Blazing Fast"],["body","\n"],["body","Powered by WebAssembly and Webworkers, InfiSearch blazes through searches on tens of thousands of documents.\nIndex downloads are persistently cached using the Cache API that backs service workers, but comes without its setup hassle. Users will never download the same data twice."],["body","\n"],["body","Some efficient, high-return compression schemes are also employed, so you get all these features without much penalty.\nThis documentation for example, which has all features enabled, generates a main index file of just 20KB, and a dictionary of 9KB."],["body","\n"],["headingLink","scalable"],["heading","Scalable"],["body","\n"],["body","A monolithic index is built by default to reduce network latency, which suffices for 90% of use cases. But, you also have the option of splitting up the index so users retrieve only what’s necessary, greatly improving client-side search scalability."],["body","\n"],["headingLink","ranking-model--query-refinement"],["heading","Ranking Model & Query Refinement"],["body","\n"],["body","InfiSearch adopts industry standard scoring schemes. Queries are first ranked using the BM25 model, then a soft disjunctive maximum of the document’s field scores is taken. By default, <title>, <h1>, <h2-6>, then other texts are indexed as four separate fields."],["body","\n"],["body","Query term proximity ranking is InfiSearch’s highlight here, and is enabled by default. Results are scaled according to how close search expressions are to one another, greatly improving contextuality of searches."],["body","\n"],["body","InfiSearch also gives the searchers the a powerful boolean query syntax, made known to them through an advanced search tips icon. You also have the option of setting up custom facet filters such as multi-select checkboxes, numeric filters, and date time filters for ease of use."],["body","\n"],["headingLink","how-it-works"],["heading","How it Works:"],["body","\n"],["body","InfiSearch depends on a static, pre-built index that is a collection of various files."],["body","\n\n"],["body","The CLI indexer tool first generates:\n\n"],["body","Binary index chunk(s)"],["body","\n"],["body","JSON field store(s) containing raw document texts"],["body","\n"],["body","Supporting metadata, for example the search dictionary"],["body","\n\n"],["body","\n"],["body","The search UI:\n\n"],["body","Figures out which index files are needed from the query"],["body","\n"],["body","Retrieves the files from cache/memory/network requests"],["body","\n"],["body","Obtains and ranks the result set"],["body","\n"],["body","Lastly, retrieves field stores from cache/memory/network requests progressively to generate result previews"],["body","\n\n"],["body","\n\n\n\n\n                    "],["body","\n\n                    "],["body","\n                        \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","indexer/misc.html"],["title","Miscellaneous - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Indexer Misc Configuration"],["body","\n"],["headingLink","indexing-positions"],["heading","Indexing Positions"],["body","\n"],["body","{\n  \"indexing_config\": {\n    \"with_positions\": true\n  }\n}\n"],["body","\n"],["body","This option controls if positions are stored.\nFeatures such as phrase queries that require positional information will not work if this is disabled.\nTurning this off for very large collections (~> 1GB) can increase the tool’s scalability, at the cost of such features."],["body","\n"],["headingLink","indexer-thread-count"],["heading","Indexer Thread Count"],["body","\n"],["body","{\n  \"indexing_config\": {\n    \"num_threads\": max(min(physical cores, logical cores) - 1, 1)\n  }\n}\n"],["body","\n"],["headingLink","indexing-multiple-files-under-one-document"],["heading","Indexing Multiple Files Under One Document"],["body","\n"],["body","InfiSearch regards each file as a single document by default. You can index multiple files into one document using the reserved field _add_files. This is useful if you need to override or add data but can’t modify the source document easily."],["body","\n"],["body","Overrides should be provided with JSON, CSV, or HTML files, as TXT and PDF files have no reliable way of supplying the _add_files field. In addition, you will need to manually map the CSV data to the _add_files field. This is automatically done for JSON and HTML files."],["body","\n"],["headingLink","example-overriding-a-documents-link-with-another-file"],["heading","Example: Overriding a Document’s Link With Another File"],["body","\n"],["body","Suppose you have the following files:"],["body","\n"],["body","folder\n|-- main.html\n|-- overrides.json\n"],["body","\n"],["body","To index main.html and override its link, you would have:"],["body","\n"],["body","overrides.json"],["body","\n"],["body","{\n  \"link\": \"https://infi-search.com\",\n  \"_add_files\": \"./main.html\"\n}\n"],["body","\n"],["body","Indexer Configuration"],["body","\n"],["body","{\n  \"indexing_config\": {\n    \"exclude\": [\"main.html\"]\n  }\n}\n"],["body","\n"],["body","This excludes indexing main.html directly, but does so through overrides.json."],["body","\n"],["headingLink","larger-collections"],["heading","Larger Collections"],["body","\n"],["body","\n"],["body","⚠️ This section serves as a reference, prefer the preconfigured scaling presets if possible."],["body","\n"],["body","\n"],["body","Field Configuration"],["body","\n"],["body","{\n  \"fields_config\": {\n    \"cache_all_field_stores\": true,\n    \"num_docs_per_store\": 100000000\n  },\n  \"indexing_config\": {\n    \"pl_limit\": 4294967295,\n    \"pl_cache_threshold\": 0,\n    \"num_pls_per_dir\": 1000\n  }\n}\n"],["body","\n"],["headingLink","field-store-caching-cache_all_field_stores"],["heading","Field Store Caching: cache_all_field_stores"],["body","\n"],["body","All fields specified with storage=[{ \"type\": \"text\" }] are cached up front when this is enabled.\nThis is the same option as the one under search functionality options, and has lower priority."],["body","\n"],["headingLink","field-store-granularity-num_docs_per_store"],["heading","Field Store Granularity: num_docs_per_store"],["body","\n"],["body","The num_docs_per_store parameter controls how many documents’ texts to store in one JSON file. Batching multiple files together increases file size but can lead to less files and better browser caching."],["body","\n"],["headingLink","index-shard-size-pl_limit"],["heading","Index Shard Size: pl_limit"],["body","\n"],["body","This is a threshold (in bytes) at which to “cut” index (pl meaning postings list) chunks.\nIncreasing this produces less but bigger chunks (which take longer to retrieve)."],["body","\n"],["headingLink","index-caching-pl_cache_threshold"],["heading","Index Caching: pl_cache_threshold"],["body","\n"],["body","Index chunks that exceed this size (in bytes) are cached by the search library on initilisation.\nIt is used to configure InfiSearch for response time (over scalability) for typical use cases."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","indexer/files.html"],["title","Data - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Indexer Data Configuration"],["body","\n"],["body","The configurations in this page specify how (mapping file data to fields) and which files to index."],["body","\n"],["body","InfiSearch’s defaults are sufficient to index most HTML files, but if not, you can also configure how the content mapping is done. Enabling support for other file formats (e.g. JSON, CSV, PDF) files is also done here."],["body","\n"],["headingLink","mapping-file-data-to-fields"],["heading","Mapping File Data to Fields"],["body","\n"],["body","{\n  \"indexing_config\": {\n    \"loaders\": {\n      // Default: Only HTML files are indexed\n      \"HtmlLoader\": {}\n    }\n  }\n}\n"],["body","\n"],["body","The indexer is able to handle data from HTML, JSON, CSV, TXT, or PDF files. Support for each file type is provided by a file Loader abstraction."],["body","\n"],["body","You may configure loaders by including them under the loaders, with any applicable options."],["body","\n"],["headingLink","html-files-loadershtmlloader"],["heading","HTML Files: loaders.HtmlLoader"],["body","\n"],["body","The HTMLLoader is the only loader that is configured by default, which is as follows:"],["body","\n"],["body","\"loaders\": {\n  \"HtmlLoader\": {\n    \"exclude_selectors\": [\n      // Selectors to exclude from indexing\n      \"script,style,form,nav,[data-infisearch-ignore]\"\n    ],\n    \"selectors\": {\n      \"title\": {\n        \"field_name\": \"title\"\n      },\n\n      \"h1\": {\n        \"field_name\": \"h1\"\n      },\n\n      \"h2,h3,h4,h5,h6\": {\n        \"attr_map\": {\n          \"id\": \"headingLink\" // stores the id attribute under the headingLink field\n        },\n        \"field_name\": \"heading\"\n      },\n\n      \"body\": {\n        \"field_name\": \"body\"\n      },\n\n      \"meta[name=\\\"description\\\"],meta[name=\\\"keywords\\\"]\": {\n        \"attr_map\": {\n          \"content\": \"body\"\n        }\n      },\n\n      // A convenient means to override the link used in the result preview\n      // See \"Linking to other pages\" for more information\n      \"span[data-infisearch-link]\": {\n        \"attr_map\": {\n          \"data-infisearch-link\": \"link\"\n        }\n      }\n    },\n    \"merge_default_selectors\": true\n  }\n}\n"],["body","\n"],["body","The HTML loader indexes a document by:"],["body","\n\n"],["body","\n"],["body","Traversing the document depth-first, in the order text naturally appears."],["body","\n"],["body","\n"],["body","\n"],["body","Checking if any selectors specified as keys under HtmlLoader.selectors is satisfied for each element. If so, all descendants (elements, text) of the element are indexed under the newly specified field_name, if any."],["body","\n\n"],["body","\n"],["body","This process repeats as the document is traversed — if a descendant matched another different selector, the field mapping is overwritten for that descendant and its descendants."],["body","\n"],["body","\n"],["body","\n"],["body","The attr_map option allows indexing attributes of specific elements under fields as well."],["body","\n"],["body","\n"],["body","\n"],["body","All selectors are matched in arbitrary order by default. To specify an order, add a higher priority: n key to your selector definition, where n is any integer."],["body","\n"],["body","\n\n"],["body","\n\n"],["body","To exclude elements from indexing, use the exclude_selectors option, or add the in-built data-infisearch-ignore attribute to your HTML."],["body","\n"],["body","If needed, you can also index HTML fragments that are incomplete documents (for example, documents which are missing the <head>). To match the entire fragment, use the body selector."],["body","\n"],["body","Lastly, if you need to remove a default selector, simply replace its definition with null. For example, \"h2,h3,h4,h5,h6\": null. Alternatively, specifying \"merge_default_selectors\": false will remove all default selectors."],["body","\n"],["headingLink","json-files-loadersjsonloader"],["heading","JSON Files: loaders.JsonLoader"],["body","\n"],["body","\"loaders\": {\n  \"JsonLoader\": {\n    \"field_map\": {\n      \"chapter_text\": \"body\",\n      \"book_link\": \"link\",\n      \"chapter_title\": \"title\"\n    },\n    // Optional, order in which to index the keys of the json {} document\n    \"field_order\": [\n      \"book_link\",\n      \"chapter_title\",\n      \"chapter_text\"\n    ]\n  }\n}\n"],["body","\n"],["body","JSON files can also be indexed. The field_map contains a mapping of your JSON data key -> field name.\nThe field_order array controls the order in which the data keys are indexed, which has a minor influence on query term proximity ranking."],["body","\n"],["body","The JSON file can be either:"],["body","\n\n"],["body","An object, with numbers, strings or null values"],["body","\n"],["body","An array of such objects"],["body","\n\n"],["headingLink","csv-files-loaderscsvloader"],["heading","CSV Files: loaders.CsvLoader"],["body","\n"],["body","\"loaders\": {\n  \"CsvLoader\": {\n    // ---------------------\n    // Map data using CSV headers\n    \"header_field_map\": {},\n    \"header_field_order\": [],            // Optional, order to index the columns\n    // ---------------------\n    // Or with header indices\n    \"index_field_map\": {\n      \"0\": \"link\",\n      \"1\": \"title\",\n      \"2\": \"body\",\n      \"4\": \"heading\"\n    },\n    \"index_field_order\": [1, 4, 2, 0],   // Optional, order to index the columns\n    // ---------------------\n    // Options for csv parsing, from the Rust \"csv\" crate\n    \"parse_options\": {\n      \"comment\": null,\n      \"delimiter\": 44,\n      \"double_quote\": true,\n      \"escape\": null,\n      \"has_headers\": true,\n      \"quote\": 34\n    }\n  }\n}\n"],["body","\n"],["body","Field mappings for CSV files can be configured using one of the field_map keys. The field_order arrays controls the order columns are indexed."],["body","\n"],["body","The parse_options key specifies options for parsing the csv file."],["body","\n"],["headingLink","pdf-files-loaderspdfloader"],["heading","PDF Files: loaders.PdfLoader"],["body","\n"],["body","\"loaders\": {\n  \"PdfLoader\": {\n    \"field\": \"body\",\n  }\n}\n"],["body","\n"],["body","This loader indexes all content into a single field “body” by default."],["body","\n"],["body","The search result title would appear as <...PDF file path breadcrumb...> (PDF), and when clicked upon will open the PDF in the browser."],["body","\n"],["headingLink","text-files-loaderstxtloader"],["heading","Text Files: loaders.TxtLoader"],["body","\n"],["body","\"loaders\": {\n  \"TxtLoader\": {\n    \"field\": \"field_name\",\n  }\n}\n"],["body","\n"],["body","This loader simply reads .txt files and indexes all its contents into a single field. This is not particularly useful without the _add_files feature feature that allows indexing data from multiple files as one document."],["body","\n"],["headingLink","file-exclusions"],["heading","File Exclusions"],["body","\n"],["body","{\n  \"indexing_config\": {\n    \"exclude\": [\n      \"infi_search.json\"\n    ],\n    \"include\": [],\n\n    \"with_positions\": true\n  }\n}\n"],["body","\n"],["headingLink","file-exclusions-exclude--infi_searchjson"],["heading","File Exclusions: exclude = [\"infi_search.json\"]"],["body","\n"],["body","Global file exclusions can be specified in this parameter, which is simply an array of file globs."],["body","\n"],["headingLink","file-inclusions-include--"],["heading","File Inclusions: include = []"],["body","\n"],["body","Similarly, you can specify only specific files to index. This is an empty array by default, which indexes everything."],["body","\n"],["body","If a file matches both an exclude and include pattern, the exclude pattern will have priority."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","indexer/fields.html"],["title","Fields - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Indexer Field Configuration"],["body","\n"],["body","Every document you index contains multiple fields. By default, InfiSearch comes baked in with the configurations needed for supporting static site search."],["body","\n"],["headingLink","default-field-configuration"],["heading","Default Field Configuration"],["body","\n"],["body","It may be helpful to first understand the default fields as examples, and how they are used in the UI:"],["body","\n"],["body","{\n  \"fields_config\": {\n    \"fields\": {\n      \"title\":        { \"weight\": 2.0 },\n      \"h1\":           { \"weight\": 2.0 },\n      \"heading\":      { \"weight\": 1.5 },\n      \"body\":         { \"weight\": 1.0 },\n      // The default weight is 0.0. These fields are stored, but not searchable.\n      \"headingLink\":  {},\n      \"link\":         {},\n      \"_relative_fp\": {} // An internal, reserved field (see \"Reserved Fields\")\n    }\n  }\n}\n"],["body","\n"],["body","Field"],["body","Source"],["body","UI Usage"],["body","\n"],["body","h1, title"],["body","<h1>, <title>"],["body","Result preview’s title. When unavailable, the _relative_fp field is displayed as a breadcrumb."],["body","\n"],["body","heading"],["body","<h2-6>"],["body","Result preview sub match’s heading."],["body","\n"],["body","headingLink"],["body","<h2-6 id=\"..\">"],["body","Result preview sub match’s #anchor link."],["body","\n"],["body","body"],["body","<body>"],["body","Result preview sub match’s main text."],["body","\n"],["body","_relative_fp"],["body","Relative file path from the source indexer folder"],["body","Result preview’s <a> link by concatenating sourceFilesUrl to _relative_fp"],["body","\n"],["body","link"],["body","User supplied override for linking to other pages"],["body","Result preview’s <a> link. Convenience default field to support custom overrides for links easily (e.g. when indexing a JSON document)."],["body","\n\n"],["body","\n\n"],["body","Click to view Graphical Illustration"],["body","\n\n\n"],["headingLink","adding-fields"],["heading","Adding Fields"],["body","\n"],["body","You can add your own fields to index for free-text search, create categorical and/or numeric facet filters, and custom numeric sort orders."],["body","\n"],["body","The user interface only incorporates the default set of fields in result highlighting however. If you need to incorporate additional fields, for example to display a icon beside each result, you can alter the HTML outputs, or use the search API."],["body","\n"],["headingLink","removing-default-fields"],["heading","Removing Default Fields"],["body","\n"],["body","If you are using InfiSearch as a general-purpose client side search tool, you can assign a value of null to remove default field definitions completely as a minor optimization.\nAlternatively, merge_default_fields: false removes all default field definitions."],["body","\n"],["body","{\n  \"fields_config\": {\n    \"fields\": {\n      \"h1\": null\n    },\n    \"merge_default_fields\": false\n  }\n}\n"],["body","\n"],["headingLink","reserved-fields"],["heading","Reserved Fields"],["body","\n"],["body","Reserved fields are prefixed with an underscore _, and are hardcoded into the indexer to perform special functions."],["body","\n\n"],["body","\n"],["body","_relative_fp: the relative path from your source folder to the file."],["body","\n"],["body","\n"],["body","\n"],["body","_add_files: This field allows you to index multiple files as a single document, which can be useful for overriding or extending data.\nSee this section under indexing for more details."],["body","\n"],["body","\n\n"],["headingLink","field-scoring"],["heading","Field Scoring"],["body","\n"],["body","{\n  \"fields_config\": {\n    \"fields\": {\n      \"title\": { \"weight\": 2.0 }\n    }\n  }\n}\n"],["body","\n"],["body","weight=0.0"],["body","\n"],["body","This parameter is a boost / penalty multiplied to a individual field’s score."],["body","\n"],["body","Specifying 0.0 will also result in the field not being indexed into InfiSearch’s inverted index at all meaning that searching for any terms in this field will not show up any results. When used in combination with the storage parameter, the use case is to create a field that is only stored for custom sort orders, facet filters, or UI purposes (e.g. the _relative_fp field)."],["body","\n"],["body","k=1.2 & b=0.75"],["body","\n"],["body","These are scoring parameters that control the impact of term frequency and document lengths. The following article provides a good overview on how to configure these, if needed."],["body","\n"],["body","All default fields except titles and headings use the above default parameters."],["body","\n"],["headingLink","field-storage"],["heading","Field Storage"],["body","\n"],["body","{\n  \"fields_config\": {\n    \"fields\": {\n      \"title\": {\n        \"storage\": [{ \"type\": \"text\" }]  // defaults\n      }\n    }\n  }\n}\n"],["body","\n"],["body","As with most free-text search tools, InfiSearch performs relies on an inverted index mapping terms to source documents."],["body","\n"],["body","Once the result set is obtained, each result document’s data could still be useful. For example, a document’s original title is essential for generating a human-readable result preview."],["body","\n"],["body","InfiSearch provides 3 storage types:"],["body","\n"],["body","1. text"],["body","\n"],["body","In this format, the document’s raw texts are stored in a JSON file as a series of [fieldName, fieldText] pairs following the order they were seen."],["body","\n"],["body","This “positioned” model enables constructing detailed result preview hierarchies you see in InfiSearch’s UI currently: Title > Heading > Text under Heading"],["body","\n"],["body","2. enum"],["body","\n"],["body","This storage format stores a single value for each indexed document, and is useful for categorical data. Only the first such occurence is stored if there are multiple. These values can be queried using the search API or used to create multi-select filters in the search UI."],["body","\n"],["body","In this documentation for example (and the mdBook plugin), there is a multi-select checkbox filter that can be used to filter each page by it’s mdBook section title. (“User Guide”, “Advanced”)"],["body","\n"],["body","Notes:"],["body","\n\n"],["body","Documents without enum values are internally assigned a default enum value that can also be queried."],["body","\n"],["body","While it is unlikely you will need more, there is a hard limit of 255 possible values for your entire document collection. Excess values are discarded, and the CLI tool will print a warning."],["body","\n"],["body","You can also use InfiSearch’s flexible boolean syntaxes to filter documents. Using this option however allows a simplifying assumption to store these values more compactly and enables creating UI multi-select filters easily."],["body","\n\n"],["body","3. i64"],["body","\n"],["body","This format stores a single 64-bit unsigned integer value for each document. Only the first such occurence is stored."],["body","\n"],["body","{\n  \"fields_config\": {\n    \"fields\": {\n      \"price\": {\n        \"storage\": [{\n          \"type\": \"i64\",\n          \"default\": 1,\n          \"parse\": \"normal\"\n        }]\n      },\n    }\n  }\n}\n"],["body","\n"],["body","3 parsing strategies are available currently: "],["body","\n\n"],["body","integer: a signed 64bit integer"],["body","\n"],["body","round: a double precision floating integer rounded to the nearest integer"],["body","\n"],["body","datetime: any date time string. This string is parsed using a datetime_fmt format specifier as outlined in the Chrono crate’s DateTime::parse_from_str method. The value is stored in seconds, as a UNIX timestamp relative to 1 Jan 1970 00:00 UTC.\n"],["body","{\n  \"type\": \"i64\",\n  \"default\": 1,\n  \"parse\": {\n    \"method\": \"datetime\",\n    \"datetime_fmt\": \"%Y %b %d %H:%M %z\",\n\n    // ----------------------\n    // Optional\n\n    // If your datetime_fmt has no timezone,\n    // specify it in seconds here, relative to UTC\n    \"timezone\": 0,\n\n    // If your datetime_fmt has no H, M, and timezone\n    // specify the default time of day in seconds here\n    \"time\": 0,\n\n    // ----------------------\n  }\n}\n"],["body","\n"],["body","\n\n"],["body","i64 fields can be used for facet search for:"],["body","\n\n"],["body","Creating numeric or datetime min-max filters in the UI easily and/or filtering them in the Search API"],["body","\n"],["body","Sorting results by these fields in the UI or API"],["body","\n\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","indexer_configuration.html"],["title","Indexer - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Indexer Configuration"],["body","\n"],["body","All indexer configurations are sourced from a json file. By default, the cli tool looks for infi_search.json in the source folder (first argument specified in the command)."],["body","\n"],["body","This can be changed using the -c <config-file-path> option."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","getting_started_mdbook.html"],["title","mdBook - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","mdbook-infisearch"],["body","\n"],["body","mdbook-infisearch is a simple search plugin replacement for mdBook to use InfiSearch’s search interface and library instead of elasticlunr.js."],["body","\n"],["headingLink","what-why"],["heading","What, why?"],["body","\n"],["body","MdBook already has its own built-in search function utilising elasticlunr, which works well enough for most cases. This plugin was mainly created as:"],["body","\n\n"],["body","A proof-of-concept to integrate InfiSearch with other static site generators easily"],["body","\n"],["body","A personal means to set up document deployment workflows in CI scripts"],["body","\n\n"],["body","You may nonetheless want to use this plugin if you need InfiSearch’s extra features. Some examples:"],["body","\n\n"],["body","you require PDF file support, or JSON file support to link to out-of-domain pages."],["body","\n"],["body","spelling correction, automatic prefix search, term proximity ranking, etc."],["body","\n\n"],["headingLink","styling"],["heading","Styling"],["body","\n"],["body","This plugin uses the css variables provided by the 5 main default themes in mdBook to style the search user interface. Switch the themes in this documentation to try out the different themes!"],["body","\n"],["body","Note: The default InfiSearch theme is not included in the plugin. To see the default styling, head on over to the styling page or view the demo site."],["body","\n"],["headingLink","installation"],["heading","Installation"],["body","\n"],["body","Install the executable either using cargo install mdbook-infisearch, or download and add the binaries to your PATH manually."],["body","\n"],["body","Then, minimally add the first two configuration sections below to your book.toml configuration file:"],["body","\n"],["body","[output.html.search]\n# disable the default mdBook search feature implementation\nenable = false\n\n[preprocessor.infisearch]\ncommand = \"mdbook-infisearch\"\n\n[output.infisearch]  # this header should be added\n# Plugin configuration options (optional)\n# See search configuration page, or use the buttons below\nmode = \"target\"\n\n# Relative path to a InfiSearch indexer configuration file from the project directory.\n#\n# If you are creating this for the first time, let this point to a non-existent file\n# and the config file will be created with Infisearch's settings tailored for mdBook.\nconfig = \"infi_search.json\"\n"],["body","\n"],["headingLink","preview"],["heading","Preview"],["body","\n"],["body","Use the following (non-canonical, documentation specific) buttons to try out the different mode parameters."],["body","\n\n\n    Auto\n    Dropdown\n    Fullscreen\n    Target\n\n"],["body","You can also try out the different themes on this documentation using mdBook’s paintbrush icon!"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","larger_collections.html"],["title","Larger Collections - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Larger Collections"],["body","\n"],["body","Three configuration presets are available for scaling this tool to larger collections. They are designed primarily for InfiSearch’s main intended use case of supporting static site search."],["body","\n"],["headingLink","introduction"],["heading","Introduction"],["body","\n"],["body","Each preset primarily makes a tradeoff between the document collection size it can support and the number of rounds of network requests (RTT)."],["body","\n"],["body","The default preset is small, which generates a monolithic index and field store, much like other client side indexing tools."],["body","\n"],["body","Specify the preset key in your configuration file to change this."],["body","\n"],["body","{\n    \"preset\": \"small\" | \"medium\" | \"large\"\n}\n"],["body","\n"],["headingLink","presets"],["heading","Presets"],["body","\n"],["body","\n"],["body","small, medium and large corresponds to 0, 1, or 2 rounds of network requests in the table below."],["body","\n"],["body","\n"],["body","Preset"],["body","Description"],["body","\n"],["body","small"],["body","Generates a monolithic index and field store. Identical to most other client side indexing tools."],["body","\n"],["body","medium"],["body","Generates an almost-monolithic index but sharded field store. Only required field stores are retrieved for generating result previews."],["body","\n"],["body","large"],["body","Generates both a sharded index and field store. Only index files that are required for the query are retrieved. Keeps stop words. This is the preset used in the demo here!"],["body","\n\n\n"],["body","In summary, scaling this tool for larger collections dosen’t come freely, and necessitates fragmenting the index and/or field stores, retrieving only what’s needed. This means extra network requests, but to a reasonable degree."],["body","\n"],["body","This tool should be able to handle 800MB (not counting things like HTML tags) collections with the full set of features enabled in the large preset."],["body","\n"],["headingLink","other-options"],["heading","Other Options"],["body","\n"],["body","There are a few other options especially worth highlighting that can help reduce the index size (and hence support larger collections) or modify caching strategies."],["body","\n\n"],["body","\n"],["body","plLazyCacheThreshold"],["body","\n"],["body","In addition to upfront caching of index files with the pl_cache_threshold indexing parameter, InfiSearch also persistently caches any index shard that was requested before, but fell short of the pl_cache_threshold."],["body","\n"],["body","\n"],["body","\n"],["body","ignore_stop_words=false"],["body","\n"],["body","This option is mostly only useful when using the small / medium presets which generate a monolithic index. Ignoring stop words in this case can reduce the overall index size, if you are willing to forgo its benefits."],["body","\n"],["body","\n"],["body","\n"],["body","with_positions=true"],["body","\n"],["body","Positions take up a considerable (~3/4) portion of the index size but produces useful information for proximity ranking, and enables performing phrase queries."],["body","\n"],["body","\n\n"],["headingLink","modified-properties"],["heading","Modified Properties"],["body","\n"],["body","Presets modify only the following properties:"],["body","\n\n"],["body","Search Configuration:  cacheAllFieldStores"],["body","\n"],["body","Indexing Configuration: num_docs_per_store, pl_limit, pl_cache_threshold"],["body","\n\n"],["body","Any of these values specified in the configuration file will override that of the preset’s."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","search_api.html"],["title","Search API - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Search API"],["body","\n"],["body","You can also interface with InfiSearch through its API."],["body","\n"],["headingLink","setup"],["heading","Setup"],["body","\n"],["body","Under the global infisearch variable, you can instantiate an instance of the Searcher class."],["body","\n"],["body","const searcher = new infisearch.Searcher({\n    url: 'https://... the index output directory ...'\n});\n"],["body","\n"],["body","The constructor parameter uses the same options as infisearch.init, refer to this page for the other available options."],["body","\n"],["body","Initialising States"],["body","\n"],["body","Setup is also async and and mostly proceeds in the WebWorker. You can  use the setupPromise and isSetupDone interfaces to optionally show UI initialising states."],["body","\n"],["body","searcher.setupPromise.then(() => {\n    assert(searcher.isSetupDone, true);\n});\n"],["body","\n"],["body","Retrieving Enum Values"],["body","\n"],["body","If you have an enum field, you can retrieve all its possible values like such:"],["body","\n"],["body","const enumValues: string[] = await searcher.getEnumValues('weather');\n\n> console.log(enumValues)\n['sunny', 'rainy', 'warm', 'cloudy']\n"],["body","\n"],["headingLink","querying"],["heading","Querying"],["body","\n"],["body","Next, you can create a Query object, which obtains and ranks the result set. "],["body","\n"],["body","const query: Query = await searcher.runQuery('sunny weather');\n"],["body","\n"],["body","The Query object follows this interface."],["body","\n"],["body","interface Query {\n    /**\n     * Original query string.\n     */\n    public readonly query: string,\n    /**\n     * Total number of results.\n     */\n    public readonly resultsTotal: number,\n    /**\n     * Returns the next top N results.\n     */\n    public readonly getNextN: (n: number) => Promise<Result[]>,\n    /**\n     * Freeing a query manually is required since its results live in the WebWorker.\n     */\n    public readonly free: () => void,\n}\n"],["body","\n"],["headingLink","filtering-and-sorting"],["heading","Filtering and Sorting"],["body","\n"],["body","Filter document results with enum fields or numeric fields by passing an additional parameter."],["body","\n"],["body","const query: Query = await searcher.runQuery('weather', {\n  enumFilters: {\n    // 'weather' is the enum field name\n    weather: [\n      null,    // Use null to include documents that have no enum values\n      'sunny',\n      'warm',\n    ]\n  },\n  i64Filters: {\n    // 'price' is the numeric field name\n    price: {\n      gte?: number | bigint,\n      lte?: number | bigint,\n    }\n  },\n});\n"],["body","\n"],["body","Sort document results using numeric fields. Results are tie-broken by their relevance."],["body","\n"],["body","const query: Query = await searcher.runQuery('weather', {\n  sort: 'pageViews',     // where 'pageViews' is the name of the field\n  sortAscending: false,  // the default is to sort in descending order\n});\n"],["body","\n"],["headingLink","loading-document-texts"],["heading","Loading Document Texts"],["body","\n"],["body","Running a query alone probably isn’t very useful. You can get a Result object using the getNextN function."],["body","\n"],["body","const results: Result[] = await query.getNextN(10);\n"],["body","\n"],["body","A Result object stores the fields of the indexed document."],["body","\n"],["body","const fields = results[0].fields;\n\n> console.log(fields)\n{\n  texts: [\n    ['_relative_fp', 'relative_file_path/of_the_file/from_the_folder/you_indexed'],\n    ['title', 'README'],\n    ['h1', 'README'],\n    ['headingLink', 'description'],\n    ['heading', 'Description'],\n    ['body', 'InfiSearch is a client-side search solution made for static sites, .....'],\n    // ... more headingLink, heading, body fields ...\n  ],\n  enums: {\n    weather: 'cloudy',\n    reporter: null,\n  },\n  numbers: {\n    datePosted: 1671336914n,\n  }\n}\n"],["body","\n\n"],["body","\n"],["body","texts: an array of [fieldName, fieldText] pairs stored in the order they were seen."],["body","\n"],["body","This ordered model is more complex than a regular key-value store, but enables the detailed content hierarchy you see in InfiSearch’s UI: Title > Heading > Text under heading"],["body","\n"],["body","\n"],["body","\n"],["body","enums: stores the enum values of the document. Documents missing enum values are assigned null."],["body","\n"],["body","\n"],["body","\n"],["body","numbers: u64 fields returned as Javascript BigInt values."],["body","\n"],["body","\n\n"],["headingLink","memory-management"],["heading","Memory Management"],["body","\n"],["body","As InfiSearch uses a WebWorker to run things, you would also need to perform some memory management."],["body","\n"],["body","Once you are done with a Query (e.g. if a new query was run), call free() on the query object."],["body","\n"],["body","query.free();\n"],["body","\n"],["body","Search interfaces usually live for the entire lifetime of the application. If you need to do so however, you should also free the Searcher instance:"],["body","\n"],["body","searcher.free();\n"],["body","\n"],["headingLink","ui-convenience-methods"],["heading","UI Convenience Methods"],["body","\n"],["body","A Result object also exposes 2 other convenience functions that may be useful to help deal with the positional format of the text type field stores."],["body","\n"],["headingLink","1-retrieving-singular-fields-as-kv-stores"],["heading","1. Retrieving Singular Fields as KV Stores"],["body","\n"],["body","Certain fields will only occur once in every document (e.g. titles, <h1> tags). To retrieve these easily, use the getKVFields method:"],["body","\n"],["body","const kvFields = result.getKVFields('link', '_relative_fp', 'title', 'h1');\n\n> console.log(kvFields)\n{\n  \"_relative_fp\": \"...\",\n  \"title\": \"...\"\n  // Missing fields will not be populated\n}\n"],["body","\n"],["body","Only the first [fieldName, fieldText] pair for each field will be populated into the fields object."],["body","\n"],["body","Tip: Constructing a Document Link"],["body","\n"],["body","If you haven’t manually added links to your source documents, you can use the _relative_fp field to construct one by concatenating it to a base URL. Any links added via the data-infisearch-link attribute are also available under the link field."],["body","\n"],["headingLink","2-associating-headings-to-other-content-fields-and-highlighting"],["heading","2. Associating Headings to other Content Fields and Highlighting"],["body","\n"],["body","To establish the relationship between heading and headingLink pairs to other content fields following them, call getHeadingsAndContents."],["body","\n"],["body","// The parameter is a varargs of field names to consider as content fields\nconst headingsAndContents: Segment[] = result.linkHeadingsToContents('body');\n"],["body","\n"],["body","This returns an array of Segment objects, each of which represents a continuous chunk of heading or content text:"],["body","\n"],["body","interface Segment {\n  /**\n   * 'content': content text without preceding heading\n   * 'heading': text from 'heading' fields\n   * 'heading-content': content text with a preceding heading\n   */\n  type: 'content' | 'heading' | 'heading-content',\n\n  /**\n   * Only present if type = 'heading-content',\n   * and points to another Segment of type === 'heading'.\n   */\n  heading?: Segment,\n\n  /**\n   * Only present if type = 'heading' | 'heading-content',\n   * and points to the heading's id, if any.\n   */\n  headingLink?: string,\n  \n  // Number of terms matched in this segment.\n  numTerms: number,\n}\n"],["body","\n"],["body","Sorting and Choosing Segments"],["body","\n"],["body","This is fully up to your UI. For example, you can first priortise segments with a greater numTerms, then tie-break by the type of the segment. "],["body","\n"],["body","Text Highlighting"],["body","\n"],["body","interface Segment {\n  // ... continuation ...\n\n  highlightHTML: (addEllipses: boolean = true) => string,\n  highlight: (addEllipses: boolean = true) => (string | HTMLElement)[],\n\n  text: string,                             // original string\n  window: { pos: number, len: number }[],   // Character position and length\n}\n"],["body","\n"],["body","There are 3 choices for text highlighting:"],["body","\n\n"],["body","\n"],["body","highlightHTML() wraps matched terms with <mark> tag, truncates text, and adds trailing and leading ellipses.\nA single escaped HTML string is then returned for use."],["body","\n"],["body","\n"],["body","\n"],["body","highlight() does the same but is slightly more efficient, returning a (string | HTMLElement)[] array.\nTo use this array safely (strings are unescaped) and conveniently, use the .append(...seg.highlight()) DOM API."],["body","\n\n"],["body","Click to see example output"],["body","\n"],["body","[\n  <span class=\"infi-ellipses\"> ... </span>,\n  ' ... text before ... ',\n  <mark class=\"infi-highlight\">highlighted</mark>,\n  ' ... text after ... ',\n  <span class=\"infi-ellipses\"> ... </span>,\n]\n"],["body","\n\n"],["body","\n"],["body","\n"],["body","Lastly, you can perform text highlighting manually using the original text and the closest window of term matches."],["body","\n"],["body","\n\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","search_configuration.html"],["title","Search UI - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Search Configuration"],["body","\n"],["body","All options here are provided through the infisearch.init function exposed by the search bundle."],["body","\n"],["body","There are 2 categories of options, the first related to the user interface, and the other search functionalities."],["body","\n"],["headingLink","search-ui-options"],["heading","Search UI Options"],["body","\n"],["body","Search UI options are organised under the uiOptions key:"],["body","\n"],["body","infisearch.init({\n    uiOptions: {\n        // ... options go here ...\n    }\n})\n"],["body","\n"],["headingLink","site-url"],["heading","Site URL"],["body","\n"],["body","sourceFilesUrl"],["body","\n\n"],["body","Example: '/' or 'https://www.infi-search.com'"],["body","\n\n"],["body","This option allows InfiSearch to construct a link to the page for search result previews. This is done by appending the relative file path of the indexed file."],["body","\n"],["body","Unless you are providing all links manually (see Linking to other pages), this URL must be provided."],["body","\n"],["headingLink","input-element"],["heading","Input Element"],["body","\n"],["body","Option"],["body","Default Value"],["body","Description"],["body","\n"],["body","input"],["body","'infi-search'"],["body","id of the input element or a HTML element reference"],["body","\n"],["body","inputDebounce"],["body","100"],["body","debounce time of keystrokes to the input element"],["body","\n"],["body","preprocessQuery"],["body","(q) => q"],["body","any function for preprocessing the query. Can be used to add a field filter for example."],["body","\n\n\n"],["body","The input element is required in most cases. Its behaviour depends on the UI mode."],["body","\n"],["headingLink","ui-mode"],["heading","UI Mode"],["body","\n"],["body","mode: 'auto'"],["body","\n"],["body","The search UI provides 4 main different behaviours."],["body","\n"],["body","Mode"],["body","Details"],["body","\n"],["body","auto"],["body","This uses the fullscreen mode for a mobile device, and dropdown otherwise."],["body","This adjustment is rerunned whenever the window is resized."],["body","\n"],["body","dropdown"],["body","This wraps the provided input element in a wrapper container, then creates a dropdown next to house InfiSearch’s UI."],["body","\n"],["body","fullscreen"],["body","This creates a distinct modal (with its own search input, close button, etc.) and appends it to the page <body>."],["body","If the input element is specified, a click handler is attached to open this UI so that it functions as a button. For default keyboard accessibility, some minimal and overidable styling is also applied to this button."],["body","This UI can also be toggled programatically, removing the need for the input."],["body","\n"],["body","target"],["body","This option is most flexible, and is used by the mdBook plugin (this documentation)."],["body","Search results are then output to a custom target element of choice."],["body","\n\n\n"],["body","Use the following buttons to try out the different modes. The default in this documentation is target."],["body","\n\n\n    Auto\n    Dropdown\n    Fullscreen\n    Target\n\n"],["headingLink","ui-mode-specific-options"],["heading","UI Mode Specific Options"],["body","\n"],["body","There are also several options specific to each mode. dropdown and fullscreen options are also applicable to the auto mode."],["body","\n"],["body","Mode"],["body","Option"],["body","Default"],["body","Description"],["body","\n"],["body","dropdown"],["body","dropdownAlignment"],["body","'bottom-end'"],["body","'bottom' or 'bottom-start' or 'bottom-end'."],["body","The alignment will be automatically flipped horizontally to ensure optimal placement."],["body","\n"],["body","fullscreen"],["body","fsContainer"],["body","<body>"],["body","id of or an element reference to attach the modal to."],["body","\n"],["body","fullscreen"],["body","fsScrollLock"],["body","true"],["body","Scroll locks the body element when the fullscreen UI is opened."],["body","\n"],["body","target"],["body","target"],["body","undefined"],["body","id of or an element reference to attach the UI."],["body","\n\n\n"],["headingLink","general-options"],["heading","General Options"],["body","\n"],["body","Option"],["body","Default"],["body","Description"],["body","\n"],["body","tip"],["body","true"],["body","Shows the advanced search tips icon on the bottom right."],["body","\n"],["body","maxSubMatches"],["body","2"],["body","Maximum headings to show for a result preview."],["body","\n"],["body","resultsPerPage"],["body","10"],["body","Number of results to load when ‘load more’ is clicked."],["body","\n"],["body","useBreadcrumb"],["body","false"],["body","Prefer using the file path as the result preview’s title. This is formatted into a breadcrumb, transformed to Title Case."],["body","Example: 'documentation/userGuide/my_file.html' → Documentation » User Guide » My File."],["body","\n\n\n"],["headingLink","setting-up-enum-filters-"],["heading","Setting Up Enum Filters ∀"],["body","\n"],["body","Enum fields you index can be mapped into UI multi-select dropdowns. In this documentation for example, Mdbook’s section titles “User Guide”, “Advanced” are mapped."],["body","\n"],["body","Setup bindings under uiOptions like so:"],["body","\n"],["body","multiSelectFilters: [\n  {\n    fieldName: 'partTitle',  // name of field definition\n    displayName: 'Section',  // UI header text\n    defaultOptName: 'None',\n    collapsed: true,         // only the first header is initially expanded\n  },\n]\n"],["body","\n"],["body","Documents that do not have an enum value are assigned an internal default enum value. The option text of this enum value to show is specified by defaultOptName."],["body","\n"],["headingLink","setting-up-numeric-filters-and-sort-orders"],["heading","Setting Up Numeric Filters and Sort Orders"],["body","\n"],["body","Indexed numeric fields can be mapped into minimum-maximum filters of <input type=\"number|date|datetime-local\" />, or used to create custom sort orders."],["body","\n"],["body","Minimum-Maximum Filters"],["body","\n"],["body","numericFilters: [\n  {\n    fieldName: 'pageViewsField',\n    displayName: 'Number of Views',\n    type: 'number' | 'date' | 'datetime-local',\n    // Text above date, datetime-local filters and placeholder text for number filters\n    // Also announced to screenreaders\n    minLabel: 'Min',\n    maxLabel: 'Max',\n  }\n]\n"],["body","\n"],["body","Sorting by Numbers, Dates"],["body","\n"],["body","sortFields: {\n  // Map of the name of your numeric field to names of UI options\n  price: {\n    asc: 'Price: Low to High',\n    desc: 'Price: High to Low',\n  },\n},\n"],["body","\n"],["headingLink","manually-showing--hiding-the-fullscreen-ui"],["heading","Manually Showing / Hiding the Fullscreen UI"],["body","\n"],["body","Call the showFullscreen() and hideFullscreen() functions returned by the infisearch.init to programatically show/hide the fullscreen search UI."],["body","\n"],["body","// These methods can be used under mode=\"auto|fullscreen\"\nconst { showFullscreen, hideFullscreen } = infisearch.init({ ... });\n"],["body","\n"],["headingLink","client-side-routing"],["heading","Client Side Routing"],["body","\n"],["body","To override the link click handler, use the specially provided parameter onLinkClick."],["body","\n"],["body","uiOptions: {\n  onLinkClick: function (ev) {\n    /*\n     By default, this function is a thunk.\n     Call ev.preventDefault() and client-side routing code here.\n     Access the anchor element using \"this\".\n    */\n  }\n}\n"],["body","\n"],["headingLink","changing-the-mobile-device-detection-method"],["heading","Changing The Mobile Device Detection Method"],["body","\n"],["body","If the client is a “mobile device”, the fullscreen UI is used under mode='auto'.\nThe check is done with a media query, which can be overwritten:"],["body","\n"],["body","uiOptions: {\n  // Any function returning a boolean\n  isMobileDevice: () =>\n    window.matchMedia('only screen and (max-width: 768px)').matches,\n}\n"],["body","\n"],["headingLink","search-functionality-options"],["heading","Search Functionality Options"],["body","\n"],["body","The options regarding search functionalities itself are rather brief:"],["body","\n"],["body","infisearch.init({\n    searcherOptions: {\n        // URL of output directory generated by the CLI tool\n        url: 'http://192.168.10.132:3000/output/',\n\n        // ---------------------------------------------------------------\n        // Optional Parameters\n        maxAutoSuffixSearchTerms: 3,\n        maxSuffixSearchTerms: 5,\n\n        useQueryTermProximity: true,\n\n        // Maximum number of results (unlimited if null).\n        resultLimit: null,\n\n        // ------------------------------\n        // Caching Options\n\n        // Caches **all** texts of storage=[{ \"type\": \"text\" }] fields up front,\n        // to avoid network requests when generating result previews.\n        // Discussed in the \"Larger Collections\" chapter.\n        cacheAllFieldStores: undefined,\n\n        // Any index chunk larger than this number of bytes\n        // will be persistently cached once requested.\n        plLazyCacheThreshold: 0,\n        // ------------------------------\n\n        // ---------------------------------------------------------------\n    },\n});\n"],["body","\n"],["headingLink","automatic-suffix-search"],["heading","(Automatic) Suffix Search"],["body","\n"],["body","maxAutoSuffixSearchTerms = 3"],["body","\n"],["body","Stemming is turned off by default. This does mean a bigger dictionary (but not too much usually), and lower recall, but much more precise searches."],["body","\n"],["body","To keep recall up, an automatic wildcard suffix search is performed on the last query term of a free text query, and only if the query does not end with a whitespace (an indicator of whether the user has finished typing)."],["body","\n"],["body","maxSuffixSearchTerms = 5"],["body","\n"],["body","This controls the maximum number of terms to search for manual wildcard suffix searches."],["body","\n"],["headingLink","term-proximity-ranking"],["heading","Term Proximity Ranking"],["body","\n"],["body","useQueryTermProximity = true"],["body","\n"],["body","If positions are indexed, document scores are also scaled by how close query expressions or terms are to each other. This boosts result relevance significantly."],["body","\n"],["headingLink","caching-options-advanced"],["heading","Caching Options (Advanced)"],["body","\n"],["body","This is discussed more in the chapter on larger collections."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","search_configuration_styling.html"],["title","Styling - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Styling"],["body","\n\n"],["headingLink","themes"],["heading","Themes"],["body","\n"],["body","InfiSearch provides 3 built-in themes by default, which correspond to the 3 stylesheets in the releases."],["body","\n"],["body","These 3 stylesheets also expose a wide range of css variables which you can alter as needed."],["body","\n"],["body","Head on over to the demo site here to try them out!"],["body","\n"],["headingLink","light"],["heading","Light"],["body","\n"],["headingLink","cdn-link"],["heading","CDN link"],["body","\n"],["body","<!-- Replace \"v0.10.1\" as appropriate -->\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui-light.css\" />\n"],["body","\n"],["headingLink","preview"],["heading","Preview"],["body","\n\n\n\n\n"],["headingLink","basic"],["heading","Basic"],["body","\n"],["headingLink","cdn-link-1"],["heading","CDN link"],["body","\n"],["body","<!-- Replace \"v0.10.1\" as appropriate -->\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui-basic.css\" />\n"],["body","\n\n\n\n"],["headingLink","dark"],["heading","Dark"],["body","\n"],["headingLink","cdn-link-2"],["heading","CDN link"],["body","\n"],["body","<!-- Replace \"v0.10.1\" as appropriate -->\n<link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/ang-zeyu/infisearch@v0.10.1/packages/search-ui/dist/search-ui-dark.css\" />\n"],["body","\n"],["headingLink","preview-1"],["heading","Preview"],["body","\n\n\n\n"],["headingLink","styling-the-fullscreen-ui-input-button"],["heading","Styling the Fullscreen UI Input Button"],["body","\n"],["body","InfiSearch is minimally invasive in styling your <input> element (except for the one that comes with the fullscreen UI), leaving this to your site’s design."],["body","\n"],["body","Notably however, for accessibility, some minimal styling is applied when using the fullscreen UI to convey the intention of a button (which opens the fullscreen UI). This is limited to:"],["body","\n\n"],["body","\n"],["body","A background & box-shadow & color application on focus"],["body","\n"],["body","These are applied with a !important modifier as they are key to conveying keyboard focus, but are also overridable easily with InfiSearch’s css variables."],["body","\n"],["body","\n"],["body","\n"],["body","cursor: pointer application on hover"],["body","\n"],["body","\n\n"],["body","Applying Input Button Styles under mode='auto'"],["body","\n"],["body","If using the default UI mode of auto, which switches between the dropdown and fullscreen UI dynamically, you can also set a different placeholder, and/or use the .infi-button-input selector to apply your styles only if the fullscreen UI is used. For example,"],["body","\n"],["body",".infi-button-input:focus:not(:hover) {\n    background: #6c757d !important;\n}\n"],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n                            \n                                \n                            \n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n                    \n                        \n                    \n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]],[["_relative_fp","incremental_indexing.html"],["title","Incremental Indexing - InfiSearch Documentation"],["body","\n    \n        \n        \n\n        \n        \n\n        \n        \n\n        \n        \n\n        \n\n        \n\n            \n                                \n                \n\n\n                \n                \n\n                \n                    "],["body","\n                        \n\n"],["body","\n"],["body","\n\n"],["h1","Incremental Indexing"],["body","\n"],["body","Incremental indexing is also supported by the indexer cli tool."],["body","\n"],["body","Detecting deleted, changed, or added files is done by storing an internal file path –> last modified timestamp map."],["body","\n"],["body","To use it, simply pass the --incremental or -i option when running the indexer."],["body","\n"],["body","\n"],["body","You will most likely not need to dabble with incremental indexing, unless your collection is extremely large (e.g. > 200MB)."],["body","\n"],["body","\n"],["headingLink","content-based-hashing"],["heading","Content Based Hashing"],["body","\n"],["body","The default change detection currently relies on the last modified time in file metadata. This may not always be guaranteed by the tools that generate the files InfiSearch indexes, or be an accurate reflection of whether a file’s contents were updated."],["body","\n"],["body","If file metadata is unavailable for any given file, the file would always be re-indexed as well."],["body","\n"],["body","You may specify the --incremental-content-hash option in such a case to opt into using a crc32 hash comparison for all files instead. This option should also be specified when running a full index and intending to run incremental indexing somewhere down the line."],["body","\n"],["body","It should only be marginally more expensive for the majority of cases, and may be the default option in the future."],["body","\n"],["headingLink","circumstances-that-trigger-a-full-reindex"],["heading","Circumstances that Trigger a Full (Re)Index"],["body","\n"],["body","Note also, that the following circumstances will forcibly trigger a full reindex:"],["body","\n\n"],["body","If the output folder path does not contain any files indexed by InfiSearch"],["body","\n"],["body","It contains files indexed by a different version of InfiSearch"],["body","\n"],["body","The configuration file (infi_search.json) was changed in any way"],["body","\n"],["body","Usage of the --incremental-content-hash option changed"],["body","\n\n"],["headingLink","caveats"],["heading","Caveats"],["body","\n"],["body","There are some additional caveats to note when using this option. Whenever possible, try to run a full reindex of the documents, utilising incremental indexing only when indexing speed is of concern – for example, supporting an “incremental” build mode in static site generators."],["body","\n"],["headingLink","small-increase-in-file-size"],["heading","Small Increase in File Size"],["body","\n"],["body","As one of the core ideas of InfiSearch is to split up the index into many tiny parts, the incremental indexing feature works by “patching” only relevant index files containing terms seen during the current run. Deleted documents are handled using an invalidation bit vector. Hence, there might be a small increase in file size due to these unpruned files."],["body","\n"],["body","However, if these “irrelevant” files become relevant again in a future index run, they will be pruned."],["body","\n"],["headingLink","collection-statistics"],["heading","Collection Statistics"],["body","\n"],["body","Collection statistics used to rank documents will tend to drift off when deleting documents (which also entails updating documents). This is because such documents may contain terms that were not encountered during the current run of incremental indexing (from added / updated documents). Detecting such terms is difficult, as there is no guarantee the deleted documents are available anymore. The alternative would be to store such information in a non-inverted index, but that again takes up extra space =(."],["body","\n"],["body","As such, the information for these terms may not be “patched”. You may notice some slight drifting in the relative ranking of documents returned after some number of incremental indexing runs, until said terms are encountered again in some other document."],["body","\n"],["headingLink","file-bloat"],["heading","File Bloat"],["body","\n"],["body","When deleting documents or updating documents, old field stores are not removed. This may lead to file bloat after many incremental indexing runs."],["body","\n\n\n\n"],["body","\n\n                    "],["body","\n\n                    "],["body","\n                        \n                            \n                                \n                            \n\n\n                        \n                    "],["body","\n                \n            \n\n            "],["body","\n                    \n                        \n                    \n\n            "],["body","\n\n        \n\n\n\n\n        \n\n\n\n        \n        \n        \n\n        \n\n\n    \n    \n\n"]]]